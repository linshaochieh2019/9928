<div class="container my-4">

  <!-- ✅ Edit Profile Button ABOVE the card -->
  @if (isOwner()) {
  <div class="d-flex justify-content-end mb-2">
    <button (click)="goEdit()" class="btn btn-outline-brand">
      Edit Profile 🖊️
    </button>
  </div>
  }

  <!-- Profile Header Row -->
  <div class="row g-4 mb-4">
    <!-- Left: Basic Info Card -->
    <div class="col-12 col-lg-7">
      <div class="card shadow-sm p-4 h-100">
        <!-- Profile Photo + Info -->
        <div class="d-flex">
          <!-- Profile Photo -->
          <img [src]="teacher.profilePhoto || 'assets/default-avatar.png'" alt="Profile Photo"
            class="rounded-circle border me-4" style="width:160px; height:160px; object-fit:cover;">

          <!-- Info -->
          <div class="flex-grow-1">
            <h1 class="h4 fw-bold mb-1 text-dark">{{ teacher.displayName }}</h1>
            <p class="fs-6 text-muted mb-3">{{ teacher.headline }}</p>

            <div class="d-flex flex-column gap-2 text-muted small">
              <div class="d-flex align-items-center">
                <i class="bi bi-flag me-2 text-secondary"></i>
                <span><strong>Nationality:</strong> {{ teacher.nationality || '—' }}</span>
              </div>
              <div class="d-flex align-items-center">
                <i class="bi bi-geo-alt me-2 text-secondary"></i>
                <span><strong>Current Location:</strong> {{ teacher.location || '—' }}</span>
              </div>
              <div class="d-flex align-items-center">
                <i class="bi bi-calendar3 me-2 text-secondary"></i>
                <span><strong>Age:</strong> {{ teacher.age || '—' }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right: Contact Info Card -->
    <div class="col-12 col-lg-5">
      <div class="card shadow-sm p-4 h-100">
        <h5 class="fw-bold mb-3">Contact Information</h5>

        <!-- Locked view -->
        <!-- <div *ngIf="teacher.phone === 'Hidden' && teacher.contactEmail === 'Hidden'"> -->
        <div *ngIf="teacher.locked">
          <p class="text-muted">Unlock to view this teacher’s contact details.</p>
          <button class="btn btn-outline-brand" disabled>
            <i class="bi bi-lock me-1"></i> Unlock to Contact
          </button>
        </div>

        <!-- Unlocked view -->
        <!-- <div *ngIf="teacher.phone !== 'Hidden' || teacher.contactEmail !== 'Hidden'" -->
        <div *ngIf="!teacher.locked" class="d-flex flex-column gap-2 small">
          <div class="d-flex align-items-center">
            <i class="bi bi-envelope me-2 text-secondary"></i>
            <span><strong>Email:</strong> {{ teacher.contactEmail || '—' }}</span>
          </div>
          <div class="d-flex align-items-center">
            <i class="bi bi-telephone me-2 text-secondary"></i>
            <span><strong>Phone:</strong> {{ teacher.phone || '—' }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>




  <!-- Professional Summary -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5 fw-bold mb-3 text-dark">Professional Summary</h2>

      <!-- Bio -->
      <h6 class="fw-semibold text-secondary mb-2">Bio</h6>
      <p class="mb-3 text-secondary" style="line-height: 1.6;">
        {{ teacher.bio || 'No professional summary provided.' }}
      </p>

      <!-- Intro Video -->
      <div *ngIf="teacher.introVideo" class="mt-3">
        <h6 class="fw-semibold text-secondary mb-2">Intro Video</h6>

        <div class="d-flex justify-content-left mt-3">
          <div class="ratio ratio-16x9 border rounded shadow-sm" style="max-width: 600px; width: 100%;">
            <iframe [src]="getYoutubeEmbedUrl(teacher.introVideo)" title="Intro Video" allowfullscreen></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Qualifications -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5 fw-bold mb-3 text-dark">Qualifications</h2>

      <!-- Education -->
      <h6 class="fw-semibold text-secondary">Education</h6>
      <ul class="list-unstyled mb-3">
        <li *ngFor="let edu of teacher.education" class="mb-1">
          🎓 {{ edu.degree }} in {{ edu.major }} — {{ edu.institution }} ({{ edu.year }})
        </li>
      </ul>

      <!-- Teaching Certifications -->
      <h6 class="fw-semibold text-secondary">Teaching Certifications</h6>
      <ul class="list-unstyled mb-3">
        <li *ngFor="let cert of teacher.teachingCertifications" class="mb-1">
          📜 {{ cert.name }} ({{ cert.year }})
        </li>
      </ul>

      <!-- Other Certificates -->
      <h6 class="fw-semibold text-secondary">Other Certificates</h6>
      <ul class="list-unstyled mb-0">
        <li *ngFor="let cert of teacher.otherCertificates" class="mb-1">
          📄 {{ cert.name }} ({{ cert.year }})
        </li>
      </ul>
    </div>
  </div>

  <!-- Experience -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5 fw-bold mb-3 text-dark">Experience</h2>
      <p><strong>Years of Experience:</strong> {{ teacher.yearsExperience || '—' }}</p>
      <ul class="list-unstyled mb-0">
        <li *ngFor="let job of teacher.workHistory" class="mb-2">
          💼 <strong>{{ job.role }}</strong> at {{ job.school }} ({{ job.country }})
          <br />
          <small class="text-muted">
            {{ job.startDate | date:'yyyy/MM' }} – {{ job.endDate ? (job.endDate | date:'yyyy/MM') : 'Present' }}
          </small>
        </li>
      </ul>
    </div>
  </div>

  <!-- Skills & Specializations -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5 fw-bold mb-3 text-dark">Skills & Specializations</h2>

      <h6 class="fw-semibold text-secondary">Age Groups</h6>
      <div class="mb-3">
        <span *ngFor="let group of teacher.ageGroups" class="badge me-1 mb-1"
          [ngStyle]="{'background-color': 'var(--brand-secondary)', 'color': 'white'}">
          {{ group }}
        </span>
      </div>

      <h6 class="fw-semibold text-secondary">Subjects</h6>
      <p class="mb-3 text-secondary" style="line-height: 1.6;">
        {{ teacher.subjects || 'No subjects provided.' }}
      </p>

      <h6 class="fw-semibold text-secondary">Language Skills</h6>
      <ul class="list-unstyled mb-0">
        <li *ngFor="let skill of teacher.languageSkills" class="mb-1">
          🌐 {{ skill.language }} — {{ skill.level }}
        </li>
      </ul>
    </div>
  </div>

  <!-- Availability & Preferences -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5 fw-bold mb-3 text-dark">Availability & Preferences</h2>

      <p>
        <strong>Employment Type: </strong>
        <span *ngFor="let type of teacher.employmentType" class="badge me-1"
          [ngStyle]="{'background-color': 'var(--brand-secondary)', 'color': 'white'}">
          {{ type }}
        </span>
      </p>

      <p>
        <strong>Preferred Locations: </strong>
        <span *ngFor="let loc of teacher.preferredLocations" class="badge me-1"
          [ngStyle]="{'background-color': 'var(--brand-secondary)', 'color': 'white'}">
          {{ loc }}
        </span>
        <span *ngIf="teacher.preferredLocationOther" class="badge me-1"
          [ngStyle]="{'background-color': 'var(--brand-secondary)', 'color': 'white'}">
          {{ teacher.preferredLocationOther }}
        </span>
      </p>

      <p><strong>Work Visa Status:</strong> {{ teacher.workVisaStatus || '—' }}</p>
      <p><strong>Available From:</strong>
        {{ teacher.availableFrom === 'immediately'
        ? 'Immediately'
        : (teacher.availableFrom | date:'yyyy/MM/dd') }}
      </p>
    </div>
  </div>

  <!-- Compensation -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h2 class="h5 fw-bold mb-3 text-dark">Compensation</h2>
      <p class="mb-0"><strong>Expected Rate/Salary:</strong> {{ teacher.expectedRate || 'Negotiable' }}</p>
    </div>
  </div>

</div>