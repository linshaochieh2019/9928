<div class="container my-4">

    <!-- Page Title -->
    <div class="text mb-5">
        <h1 class="fw-bold" style="color: var(--brand-dark);">
            Your Unlocked Teachers
        </h1>
        <p class="text-muted fs-5">
            View the teachers whose contact information you’ve unlocked.
        </p>
    </div>

    @if (loading) {
    <div class="text-center text-muted">Loading...</div>
    } @else if (error) {
    <div class="alert alert-danger">{{ error }}</div>
    } @else if (unlocked.length === 0) {
    <div class="alert alert-info">You haven’t unlocked any teachers yet.</div>
    } @else {
    <div class="row g-4">
        @for (log of paginatedUnlocks; track log._id) {
        <div class="col-md-4">
            <div class="card h-100 shadow-sm">
                <img [src]="log.teacher.profilePhoto || 'assets/default-avatar.png'" alt="{{ log.teacher.displayName }}"
                    class="card-img-top" style="object-fit: cover; height: 250px;">

                <div class="card-body d-flex flex-column">
                    <!-- Name + Headline -->
                    <h5 class="card-title">{{ log.teacher.displayName }}</h5>
                    <p class="headline text-brand fw-semibold mb-2">{{ log.teacher.headline }}</p>

                    <!-- Quick Info -->
                    <p class="mb-1"><strong>Nationality:</strong> {{ log.teacher.nationality }}</p>
                    <p class="mb-1"><strong>Current Location:</strong> {{ log.teacher.location }}</p>
                    <p class="mb-1"><strong>Experience:</strong> {{ log.teacher.yearsExperience }}+ years teaching</p>

                    <!-- Unlock Date -->
                    <p class="text-muted small fst-italic mt-2">
                        Unlocked on {{ log.createdAt | date: 'mediumDate' }}
                    </p>

                    <!-- Push buttons to bottom -->
                    <div class="mt-auto">
                        <a [routerLink]="['/teachers', log.teacher._id]" class="btn btn-outline-brand btn-sm w-100">
                            View Profile
                        </a>
                    </div>
                </div>
            </div>
        </div>
        }
    </div>

    <!-- Pagination -->
    <nav class="mt-4">
        <ul class="pagination justify-content-center">
            <!-- Previous -->
            <li class="page-item" [class.disabled]="page === 1">
                <button class="page-link" (click)="changePage(page - 1)">Previous</button>
            </li>

            <!-- Page numbers -->
            @for (p of pages; track p) {
            <li class="page-item" [class.active]="page === p">
                <button class="page-link" (click)="changePage(p)">{{ p }}</button>
            </li>
            }

            <!-- Next -->
            <li class="page-item" [class.disabled]="page === totalPages">
                <button class="page-link" (click)="changePage(page + 1)">Next</button>
            </li>
        </ul>
    </nav>
    }
</div>